@import "tailwindcss";

/* ── Theme ── */
@theme {
  --font-chalk: "Fredericka the Great", cursive;
  --font-ui: "Architects Daughter", cursive, sans-serif;
  --color-board: #000000;
  --color-chalk: #e8e5dd;
  --color-correct: #4ade80;
  --color-wrong: #f87171;
  --color-gold: #fbbf24;
  --color-streak-fire: #f97316;
  --color-skull: #c084fc;
  --color-timed: #38bdf8;
  --color-ultimate: #f472b6;
}

/* ── Semantic runtime tokens (dark defaults) ── */
:root {
  --color-fg: 255 255 255;
  /* white for dark mode — used as rgb() triple */
  --color-overlay: rgba(0, 0, 0, 0.85);
  --color-overlay-dim: rgba(0, 0, 0, 0.60);
  --color-surface: rgba(255, 255, 255, 0.10);
  /* Slightly brighter surface — cards stand out from black */
  --color-locked: rgba(255, 255, 255, 0.14);
}

/* ── Light mode overrides ── */
[data-theme="light"] {
  --color-board: #faf8f5;
  /* Warm off-white — easier on the eyes than pure white */
  --color-chalk: #1a1a2e;
  /* Deep navy-gray — rich, strong text */
  --color-fg: 26 26 46;
  /* Navy-gray rgb triple */
  --color-overlay: rgba(250, 248, 245, 0.97);
  --color-overlay-dim: rgba(0, 0, 0, 0.40);
  --color-surface: rgba(235, 228, 218, 0.50);
  /* Warm tan surface — clearly visible on off-white */
  --color-locked: rgba(26, 26, 46, 0.08);
  --color-correct: #15803d;
  --color-wrong: #b91c1c;
  --color-gold: #92400e;
  /* Amber-800 — richer, more contrast on light bg */
  --color-streak-fire: #9a3412;
}

/* ── Base ── */
@layer base {

  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
  }

  html,
  body,
  #root {
    width: 100%;
    height: 100%;
    overflow: hidden;
    touch-action: none;
    user-select: none;
    -webkit-user-select: none;
    position: fixed;
    inset: 0;
  }

  body {
    background: var(--color-board);
    color: var(--color-chalk);
    font-family: var(--font-ui);
    -webkit-font-smoothing: antialiased;
  }
}

/* ── Blackboard texture (static, rendered once) ── */
.blackboard-bg {
  background-color: var(--color-board);
  background-image:
    radial-gradient(ellipse at 15% 40%, rgba(28, 50, 35, 0.35) 0%, transparent 60%),
    radial-gradient(ellipse at 85% 25%, rgba(22, 38, 55, 0.30) 0%, transparent 55%),
    radial-gradient(ellipse at 50% 80%, rgba(40, 30, 20, 0.25) 0%, transparent 50%);
}

[data-theme="light"] .blackboard-bg {
  background-image:
    radial-gradient(ellipse at 15% 40%, rgba(210, 195, 170, 0.12) 0%, transparent 60%),
    radial-gradient(ellipse at 85% 25%, rgba(190, 180, 165, 0.10) 0%, transparent 55%),
    radial-gradient(ellipse at 50% 80%, rgba(200, 190, 175, 0.08) 0%, transparent 50%);
}

/* ── Vignette overlay ── */
.vignette-overlay {
  background: radial-gradient(ellipse at 50% 50%, transparent 40%, rgba(0, 0, 0, 0.55) 100%);
}

[data-theme="light"] .vignette-overlay {
  background: radial-gradient(ellipse at 50% 50%, transparent 55%, rgba(160, 140, 110, 0.06) 100%);
}

/* ── Light mode global contrast boosts ── */
[data-theme="light"] button svg {
  opacity: 1 !important;
  stroke-width: 2.5px;
}

[data-theme="light"] .chalk {
  -webkit-text-stroke: 0.6px currentColor;
}

[data-theme="light"] .ui {
  font-weight: 600;
}

/* ── Dark-mode contrast boosts — WCAG-friendly minimums for white-on-black ── */
:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/15,
:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/20 {
  color: rgba(var(--color-fg), 0.45) !important;
}

:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/25,
:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/30 {
  color: rgba(var(--color-fg), 0.55) !important;
}

:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/35,
:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/40 {
  color: rgba(var(--color-fg), 0.65) !important;
}

:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/50 {
  color: rgba(var(--color-fg), 0.75) !important;
}

:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/60 {
  color: rgba(var(--color-fg), 0.85) !important;
}

/* ── Dark-mode border contrast boosts — faint white borders become visible on black ── */
:root:not([data-theme="light"]) .border-\[rgb\(var\(--color-fg\)\)\]\/5,
:root:not([data-theme="light"]) .border-\[rgb\(var\(--color-fg\)\)\]\/8,
:root:not([data-theme="light"]) .border-\[rgb\(var\(--color-fg\)\)\]\/10 {
  border-color: rgba(var(--color-fg), 0.18) !important;
}

:root:not([data-theme="light"]) .border-\[rgb\(var\(--color-fg\)\)\]\/15,
:root:not([data-theme="light"]) .border-\[rgb\(var\(--color-fg\)\)\]\/20 {
  border-color: rgba(var(--color-fg), 0.25) !important;
}

/* ── Dark-mode background contrast boosts — near-invisible tints become visible ── */
:root:not([data-theme="light"]) .bg-\[rgb\(var\(--color-fg\)\)\]\/\[0\.02\],
:root:not([data-theme="light"]) .bg-\[rgb\(var\(--color-fg\)\)\]\/\[0\.03\],
:root:not([data-theme="light"]) .bg-\[rgb\(var\(--color-fg\)\)\]\/5 {
  background-color: rgba(var(--color-fg), 0.07) !important;
}

:root:not([data-theme="light"]) .bg-\[rgb\(var\(--color-fg\)\)\]\/10 {
  background-color: rgba(var(--color-fg), 0.13) !important;
}

/* ── Dark-mode placeholder contrast ── */
:root:not([data-theme="light"]) .placeholder\:text-\[rgb\(var\(--color-fg\)\)\]\/15::placeholder,
:root:not([data-theme="light"]) .placeholder\:text-\[rgb\(var\(--color-fg\)\)\]\/20::placeholder {
  color: rgba(var(--color-fg), 0.40) !important;
}

/* ── Light-mode contrast boosts — higher floor for dark-on-white readability ── */
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/15,
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/20 {
  color: rgba(var(--color-fg), 0.55) !important;
}

[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/25,
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/30,
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/40 {
  color: rgba(var(--color-fg), 0.75) !important;
}

[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/50,
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/60 {
  color: rgba(var(--color-fg), 0.90) !important;
}

[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/70,
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/80 {
  color: rgba(var(--color-fg), 1) !important;
}

/* ── Light-mode border contrast boosts — invisible low-opacity borders become visible ── */
[data-theme="light"] .border-\[rgb\(var\(--color-fg\)\)\]\/5,
[data-theme="light"] .border-\[rgb\(var\(--color-fg\)\)\]\/8,
[data-theme="light"] .border-\[rgb\(var\(--color-fg\)\)\]\/10 {
  border-color: rgba(var(--color-fg), 0.20) !important;
}

[data-theme="light"] .border-\[rgb\(var\(--color-fg\)\)\]\/15,
[data-theme="light"] .border-\[rgb\(var\(--color-fg\)\)\]\/20 {
  border-color: rgba(var(--color-fg), 0.28) !important;
}

/* ── Light-mode background contrast boosts — faint tinted fills become visible ── */
[data-theme="light"] .bg-\[rgb\(var\(--color-fg\)\)\]\/\[0\.02\],
[data-theme="light"] .bg-\[rgb\(var\(--color-fg\)\)\]\/\[0\.03\],
[data-theme="light"] .bg-\[rgb\(var\(--color-fg\)\)\]\/5 {
  background-color: rgba(var(--color-fg), 0.06) !important;
}

[data-theme="light"] .bg-\[rgb\(var\(--color-fg\)\)\]\/10 {
  background-color: rgba(var(--color-fg), 0.12) !important;
}

[data-theme="light"] .bg-\[rgb\(var\(--color-fg\)\)\]\/15 {
  background-color: rgba(var(--color-fg), 0.18) !important;
}

/* ── Light-mode placeholder contrast ── */
[data-theme="light"] .placeholder\:text-\[rgb\(var\(--color-fg\)\)\]\/15::placeholder,
[data-theme="light"] .placeholder\:text-\[rgb\(var\(--color-fg\)\)\]\/20::placeholder {
  color: rgba(var(--color-fg), 0.45) !important;
}

/* ── Chalk text — minimal, no filters ── */
.chalk-text {
  color: var(--color-chalk);
  will-change: transform;
}

/* ── DRY font utilities ── */
.chalk {
  font-family: var(--font-chalk);
}

.ui {
  font-family: var(--font-ui);
}

/* ── Milestone pop ── */
@keyframes milestone-pop {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }

  30% {
    transform: scale(1.4);
    opacity: 1;
  }

  60% {
    transform: scale(1);
    opacity: 1;
  }

  100% {
    transform: scale(1);
    opacity: 0;
  }
}

.milestone-pop {
  animation: milestone-pop 1.2s ease-out forwards;
  pointer-events: none;
}

/* ── Speed bonus text ── */
@keyframes speed-pop {
  0% {
    transform: translateY(0) scale(0.8);
    opacity: 0;
  }

  20% {
    transform: translateY(-8px) scale(1);
    opacity: 1;
  }

  70% {
    transform: translateY(-16px) scale(1);
    opacity: 0.8;
  }

  100% {
    transform: translateY(-24px) scale(0.9);
    opacity: 0;
  }
}

.speed-pop {
  animation: speed-pop 0.8s ease-out forwards;
  pointer-events: none;
}

/* ── Wrong-answer screen shake (subtle) ── */
@keyframes wrong-shake {

  0%,
  100% {
    transform: translateX(0);
  }

  20% {
    transform: translateX(-1.5px);
  }

  40% {
    transform: translateX(1.5px);
  }

  60% {
    transform: translateX(-1px);
  }

  80% {
    transform: translateX(1px);
  }
}

.wrong-shake {
  animation: wrong-shake 0.2s ease-out;
}

/* ── Correct-answer bounce ── */
@keyframes answer-bounce {
  0% {
    transform: scale(1);
  }

  40% {
    transform: scale(1.06);
  }

  100% {
    transform: scale(1);
  }
}

.answer-bounce {
  animation: answer-bounce 0.25s ease-out;
}

/* ── Feedback flash overlays ── */
@keyframes correct-flash {
  0% {
    opacity: 0;
  }

  25% {
    opacity: 0.12;
  }

  100% {
    opacity: 0;
  }
}

@keyframes wrong-flash {
  0% {
    opacity: 0;
  }

  25% {
    opacity: 0.10;
  }

  100% {
    opacity: 0;
  }
}

.flash-correct {
  animation: correct-flash 0.4s ease-out forwards;
  background: var(--color-correct);
}

.flash-wrong {
  animation: wrong-flash 0.5s ease-out forwards;
  background: var(--color-wrong);
}

/* ── Streak fire (GPU-only, no filter) ── */
@keyframes fire-glow {

  0%,
  100% {
    text-shadow: 0 0 6px var(--color-streak-fire);
  }

  50% {
    text-shadow: 0 0 16px var(--color-gold), 0 0 24px var(--color-streak-fire);
  }
}

.on-fire {
  animation: fire-glow 0.6s ease-in-out infinite;
}

/* ── Scrollbars ── */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.20) transparent;
}

[data-theme="light"] * {
  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;
}

/* Webkit (Chrome, Safari, Edge) */
*::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.20);
  border-radius: 3px;
}

*::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.35);
}

[data-theme="light"] *::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

[data-theme="light"] *::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* ── Hand-drawn irregular borders (chalk-style) ── */
.hand-drawn-box {
  position: relative;
  border: none !important;
  border-radius: 0 !important;
}

.hand-drawn-box::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: 12px 8px 14px 6px;
  border: 1.5px solid rgba(var(--color-fg), 0.22);
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='r'%3E%3CfeTurbulence baseFrequency='0.03' numOctaves='4' seed='2'/%3E%3CfeDisplacementMap in='SourceGraphic' scale='4'/%3E%3C/filter%3E%3Crect width='200' height='200' fill='white' filter='url(%23r)'/%3E%3C/svg%3E");
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='r'%3E%3CfeTurbulence baseFrequency='0.03' numOctaves='4' seed='2'/%3E%3CfeDisplacementMap in='SourceGraphic' scale='4'/%3E%3C/filter%3E%3Crect width='200' height='200' fill='white' filter='url(%23r)'/%3E%3C/svg%3E");
}

[data-theme="light"] .hand-drawn-box::before {
  border-color: rgba(var(--color-fg), 0.25);
}

[data-theme="light"] .hand-drawn-box-alt::before {
  border-color: rgba(var(--color-fg), 0.25);
}

/* Variant with slightly different wobble */
.hand-drawn-box-alt {
  position: relative;
  border: none !important;
  border-radius: 0 !important;
}

.hand-drawn-box-alt::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: 6px 14px 8px 12px;
  border: 1.5px solid rgba(var(--color-fg), 0.22);
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='r'%3E%3CfeTurbulence baseFrequency='0.035' numOctaves='3' seed='7'/%3E%3CfeDisplacementMap in='SourceGraphic' scale='3'/%3E%3C/filter%3E%3Crect width='200' height='200' fill='white' filter='url(%23r)'/%3E%3C/svg%3E");
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='r'%3E%3CfeTurbulence baseFrequency='0.035' numOctaves='3' seed='7'/%3E%3CfeDisplacementMap in='SourceGraphic' scale='3'/%3E%3C/filter%3E%3Crect width='200' height='200' fill='white' filter='url(%23r)'/%3E%3C/svg%3E");
}

/* ── GPU hints for animated elements ── */
.gpu-layer {
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* ── Desktop: center the app in a mobile-width column (TikTok style) ── */
@media (min-width: 768px) {

  html,
  body,
  #root {
    overflow: visible;
    position: static;
  }

  #root {
    max-width: 430px;
    min-height: 100vh;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
  }
}

/* ── Landscape mobile overrides ── */
@media (orientation: landscape) and (max-height: 500px) {

  /* Compact score area */
  .landscape-score {
    padding-top: 8px !important;
  }

  .landscape-score .text-7xl,
  .landscape-score .text-8xl {
    font-size: 2.5rem !important;
  }

  /* Smaller question text */
  .landscape-question {
    font-size: 2.5rem !important;
    margin-bottom: 0.5rem !important;
  }

  /* Compact answer area */
  .landscape-answers {
    padding-bottom: 2rem !important;
    gap: 0.5rem !important;
  }

  .landscape-answers button {
    width: 3.5rem !important;
    height: 3.5rem !important;
  }

  /* Tighter bottom nav */
  .landscape-nav {
    padding-top: 0.25rem !important;
    padding-bottom: 0.25rem !important;
  }

  .landscape-nav svg {
    width: 1rem !important;
    height: 1rem !important;
  }

  .landscape-nav span {
    font-size: 8px !important;
  }

  /* Hide Bee Buddy in landscape to save space */
  .landscape-hide {
    display: none !important;
  }
}