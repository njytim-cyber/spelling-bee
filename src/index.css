@import "tailwindcss";

/* ── Theme ── */
@theme {
  --font-chalk: "Fredericka the Great", cursive;
  --font-ui: "Architects Daughter", cursive, sans-serif;
  --color-board: #000000;
  --color-chalk: #e0ddd5;
  --color-correct: #4ade80;
  --color-wrong: #f87171;
  --color-gold: #fbbf24;
  --color-streak-fire: #f97316;
  --color-skull: #c084fc;
  --color-timed: #38bdf8;
  --color-ultimate: #f472b6;
}

/* ── Semantic runtime tokens (dark defaults) ── */
:root {
  --color-fg: 255 255 255;
  /* white for dark mode — used as rgb() triple */
  --color-overlay: rgba(0, 0, 0, 0.85);
  --color-overlay-dim: rgba(0, 0, 0, 0.60);
  --color-surface: rgba(255, 255, 255, 0.08);
  --color-locked: rgba(255, 255, 255, 0.12);
}

/* ── Light mode overrides ── */
[data-theme="light"] {
  --color-board: #ffffff;
  /* Pure white — clean, standard */
  --color-chalk: #111827;
  /* Gray-900 — strong readable text */
  --color-fg: 17 24 39;
  /* Gray-900 rgb */
  --color-overlay: rgba(255, 255, 255, 0.96);
  --color-overlay-dim: rgba(0, 0, 0, 0.35);
  --color-surface: rgba(249, 250, 251, 0.90);
  /* Gray-50 surface cards */
  --color-locked: rgba(17, 24, 39, 0.06);
  --color-correct: #16a34a;
  --color-wrong: #dc2626;
  --color-gold: #b45309;
  /* Amber-700 */
  --color-streak-fire: #c2410c;
}

/* ── Base ── */
@layer base {

  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
  }

  html,
  body,
  #root {
    width: 100%;
    height: 100%;
    overflow: hidden;
    touch-action: none;
    user-select: none;
    -webkit-user-select: none;
    position: fixed;
    inset: 0;
  }

  body {
    background: var(--color-board);
    color: var(--color-chalk);
    font-family: var(--font-ui);
    -webkit-font-smoothing: antialiased;
  }
}

/* ── Blackboard texture (static, rendered once) ── */
.blackboard-bg {
  background-color: var(--color-board);
  background-image:
    radial-gradient(ellipse at 15% 40%, rgba(28, 50, 35, 0.35) 0%, transparent 60%),
    radial-gradient(ellipse at 85% 25%, rgba(22, 38, 55, 0.30) 0%, transparent 55%),
    radial-gradient(ellipse at 50% 80%, rgba(40, 30, 20, 0.25) 0%, transparent 50%);
}

[data-theme="light"] .blackboard-bg {
  background-image:
    radial-gradient(ellipse at 15% 40%, rgba(229, 231, 235, 0.15) 0%, transparent 60%),
    radial-gradient(ellipse at 85% 25%, rgba(229, 231, 235, 0.10) 0%, transparent 55%),
    radial-gradient(ellipse at 50% 80%, rgba(229, 231, 235, 0.08) 0%, transparent 50%);
}

/* ── Vignette overlay ── */
.vignette-overlay {
  background: radial-gradient(ellipse at 50% 50%, transparent 40%, rgba(0, 0, 0, 0.55) 100%);
}

[data-theme="light"] .vignette-overlay {
  background: radial-gradient(ellipse at 50% 50%, transparent 60%, rgba(0, 0, 0, 0.04) 100%);
}

/* ── Light mode global contrast boosts ── */
[data-theme="light"] button svg {
  opacity: 1 !important;
  stroke-width: 2.5px;
}

[data-theme="light"] .chalk {
  -webkit-text-stroke: 0.6px currentColor;
}

[data-theme="light"] .ui {
  font-weight: 700;
}

/* ── Dark-mode contrast boosts — faint white text on black needs higher minimums ── */
:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/15,
:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/20 {
  color: rgba(var(--color-fg), 0.35) !important;
}

:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/25,
:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/30 {
  color: rgba(var(--color-fg), 0.45) !important;
}

:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/35,
:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/40 {
  color: rgba(var(--color-fg), 0.55) !important;
}

:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/50 {
  color: rgba(var(--color-fg), 0.65) !important;
}

:root:not([data-theme="light"]) .text-\[rgb\(var\(--color-fg\)\)\]\/60 {
  color: rgba(var(--color-fg), 0.75) !important;
}

/* ── Light-mode contrast boosts — dark text on white needs similar floor ── */
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/25,
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/30,
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/40 {
  color: rgba(var(--color-fg), 0.65) !important;
}

[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/50,
[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/60 {
  color: rgba(var(--color-fg), 0.85) !important;
}

[data-theme="light"] .text-\[rgb\(var\(--color-fg\)\)\]\/80 {
  color: rgba(var(--color-fg), 1) !important;
}



/* ── Chalk text — minimal, no filters ── */
.chalk-text {
  color: var(--color-chalk);
  will-change: transform;
}

/* ── DRY font utilities ── */
.chalk {
  font-family: var(--font-chalk);
}

.ui {
  font-family: var(--font-ui);
}

/* ── Milestone pop ── */
@keyframes milestone-pop {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }

  30% {
    transform: scale(1.4);
    opacity: 1;
  }

  60% {
    transform: scale(1);
    opacity: 1;
  }

  100% {
    transform: scale(1);
    opacity: 0;
  }
}

.milestone-pop {
  animation: milestone-pop 1.2s ease-out forwards;
  pointer-events: none;
}

/* ── Speed bonus text ── */
@keyframes speed-pop {
  0% {
    transform: translateY(0) scale(0.8);
    opacity: 0;
  }

  20% {
    transform: translateY(-8px) scale(1);
    opacity: 1;
  }

  70% {
    transform: translateY(-16px) scale(1);
    opacity: 0.8;
  }

  100% {
    transform: translateY(-24px) scale(0.9);
    opacity: 0;
  }
}

.speed-pop {
  animation: speed-pop 0.8s ease-out forwards;
  pointer-events: none;
}

/* ── Wrong-answer screen shake (subtle) ── */
@keyframes wrong-shake {

  0%,
  100% {
    transform: translateX(0);
  }

  20% {
    transform: translateX(-1.5px);
  }

  40% {
    transform: translateX(1.5px);
  }

  60% {
    transform: translateX(-1px);
  }

  80% {
    transform: translateX(1px);
  }
}

.wrong-shake {
  animation: wrong-shake 0.2s ease-out;
}

/* ── Correct-answer bounce ── */
@keyframes answer-bounce {
  0% {
    transform: scale(1);
  }

  40% {
    transform: scale(1.06);
  }

  100% {
    transform: scale(1);
  }
}

.answer-bounce {
  animation: answer-bounce 0.25s ease-out;
}

/* ── Feedback flash overlays ── */
@keyframes correct-flash {
  0% {
    opacity: 0;
  }

  25% {
    opacity: 0.12;
  }

  100% {
    opacity: 0;
  }
}

@keyframes wrong-flash {
  0% {
    opacity: 0;
  }

  25% {
    opacity: 0.10;
  }

  100% {
    opacity: 0;
  }
}

.flash-correct {
  animation: correct-flash 0.4s ease-out forwards;
  background: var(--color-correct);
}

.flash-wrong {
  animation: wrong-flash 0.5s ease-out forwards;
  background: var(--color-wrong);
}

/* ── Streak fire (GPU-only, no filter) ── */
@keyframes fire-glow {

  0%,
  100% {
    text-shadow: 0 0 6px var(--color-streak-fire);
  }

  50% {
    text-shadow: 0 0 16px var(--color-gold), 0 0 24px var(--color-streak-fire);
  }
}

.on-fire {
  animation: fire-glow 0.6s ease-in-out infinite;
}

/* ── Scrollbars ── */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.15) transparent;
}

[data-theme="light"] * {
  scrollbar-color: rgba(0, 0, 0, 0.15) transparent;
}

/* Webkit (Chrome, Safari, Edge) */
*::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
  border-radius: 3px;
}

*::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

[data-theme="light"] *::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

[data-theme="light"] *::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* ── GPU hints for animated elements ── */
.gpu-layer {
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* ── Desktop: center the app in a mobile-width column (TikTok style) ── */
@media (min-width: 768px) {

  html,
  body,
  #root {
    overflow: visible;
    position: static;
  }

  #root {
    max-width: 430px;
    min-height: 100vh;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
  }
}

/* ── Landscape mobile overrides ── */
@media (orientation: landscape) and (max-height: 500px) {

  /* Compact score area */
  .landscape-score {
    padding-top: 8px !important;
  }

  .landscape-score .text-7xl,
  .landscape-score .text-8xl {
    font-size: 2.5rem !important;
  }

  /* Smaller question text */
  .landscape-question {
    font-size: 2.5rem !important;
    margin-bottom: 0.5rem !important;
  }

  /* Compact answer area */
  .landscape-answers {
    padding-bottom: 2rem !important;
    gap: 0.5rem !important;
  }

  .landscape-answers button {
    width: 3.5rem !important;
    height: 3.5rem !important;
  }

  /* Tighter bottom nav */
  .landscape-nav {
    padding-top: 0.25rem !important;
    padding-bottom: 0.25rem !important;
  }

  .landscape-nav svg {
    width: 1rem !important;
    height: 1rem !important;
  }

  .landscape-nav span {
    font-size: 8px !important;
  }

  /* Hide Bee Buddy in landscape to save space */
  .landscape-hide {
    display: none !important;
  }
}